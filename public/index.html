<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROS2 Web Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%);
            min-height: 100vh;
            color: white;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
        }
        .pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .log-container {
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }
        .log-entry {
            padding: 8px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            color: white;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }
        .btn-success { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
        .btn-danger { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }
        .btn-primary { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); }
    </style>
</head>
<body class="p-6">
    <div class="max-w-7xl mx-auto">
        
        <div class="text-center mb-8">
            <h1 class="text-5xl font-bold text-white mb-4">ROS2 Web Dashboard</h1>
            <div class="flex items-center justify-center gap-3">
                <div id="connectionStatus" class="flex items-center gap-2">
                    <div class="w-3 h-3 rounded-full bg-gray-500"></div>
                    <span class="text-lg">Initializing...</span>
                </div>
                <span class="text-gray-400">|</span>
                <span id="messageCount" class="text-gray-400">0 messages</span>
            </div>
        </div>

        
        <div class="glass-card p-6 mb-6">
            <h2 class="text-2xl font-bold mb-4">Launch Control</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-semibold mb-2">Package Name</label>
                    <input type="text" id="packageName" value="my_robot_controller" 
                           class="w-full px-4 py-2 rounded-lg bg-white/20 border border-white/30 text-white">
                </div>
                <div>
                    <label class="block text-sm font-semibold mb-2">Launch File</label>
                    <input type="text" id="launchFile" value="all_nodes_launch.py" 
                           class="w-full px-4 py-2 rounded-lg bg-white/20 border border-white/30 text-white">
                </div>
            </div>
            <div class="flex gap-3 mt-4">
                <button onclick="launchROS2()" class="btn btn-success">Launch ROS2</button>
                <button onclick="stopROS2()" class="btn btn-danger">Stop All</button>
                <button onclick="refreshStatus()" class="btn btn-primary">Refresh Status</button>
            </div>
        </div>

      
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="glass-card p-6">
                <h3 class="text-sm font-semibold text-gray-300 mb-2">ROS2 Status</h3>
                <div class="text-2xl font-bold" id="ros2Status">Stopped</div>
            </div>
            <div class="glass-card p-6">
                <h3 class="text-sm font-semibold text-gray-300 mb-2">Active Nodes</h3>
                <div class="text-2xl font-bold text-blue-400" id="nodeCount">0</div>
            </div>
            <div class="glass-card p-6">
                <h3 class="text-sm font-semibold text-gray-300 mb-2">Active Topics</h3>
                <div class="text-2xl font-bold text-green-400" id="topicCount">0</div>
            </div>
            <div class="glass-card p-6">
                <h3 class="text-sm font-semibold text-gray-300 mb-2">Messages</h3>
                <div class="text-2xl font-bold text-purple-400" id="messageCountLarge">0</div>
            </div>
        </div>

      
        <div class="glass-card p-6 mb-6">
            <h2 class="text-2xl font-bold mb-4">Latest Message</h2>
            <div class="bg-black/30 p-4 rounded-lg">
                <div class="text-sm text-gray-400 mb-2">
                    Node: <span id="latestNode" class="text-blue-400">-</span> | 
                    Time: <span id="latestTime" class="text-green-400">-</span>
                </div>
                <div id="latestMessage" class="text-lg font-mono text-white">
                    Waiting for data...
                </div>
            </div>
        </div>

      
        <div class="glass-card p-6 mb-6">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold">Message Stream</h2>
                <button onclick="clearLogs()" class="btn btn-danger text-sm py-1">Clear</button>
            </div>
            <div id="logStream" class="log-container bg-black/30 rounded-lg p-4">
                <div class="text-gray-400 text-center py-4">Waiting for messages...</div>
            </div>
        </div>

        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="glass-card p-6">
                <h2 class="text-2xl font-bold mb-4">Active Nodes</h2>
                <div id="nodesList" class="space-y-2">
                    <div class="text-gray-400">No nodes detected</div>
                </div>
            </div>
            <div class="glass-card p-6">
                <h2 class="text-2xl font-bold mb-4">Active Topics</h2>
                <div id="topicsList" class="space-y-2">
                    <div class="text-gray-400">No topics detected</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const SERVER_URL = 'http://localhost:3000';
        let messageHistory = [];

       
        async function launchROS2() {
            const packageName = document.getElementById('packageName').value;
            const launchFile = document.getElementById('launchFile').value;

            try {
                const response = await fetch(`${SERVER_URL}/api/ros2/launch`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ package_name: packageName, launch_file: launchFile })
                });
                const data = await response.json();
                alert(data.message || 'ROS2 launched');
                refreshStatus();
            } catch (error) {
                alert('Error: ' + error.message);
            }
        }

       
        async function stopROS2() {
            try {
                const response = await fetch(`${SERVER_URL}/api/ros2/stop`, { method: 'POST' });
                const data = await response.json();
                alert(data.message);
                refreshStatus();
            } catch (error) {
                alert('Error: ' + error.message);
            }
        }

     
        async function refreshStatus() {
            await Promise.all([
                updateStatus(),
                updateNodes(),
                updateTopics()
            ]);
        }

        
        async function updateStatus() {
            try {
                const response = await fetch(`${SERVER_URL}/api/ros2/status`);
                const data = await response.json();
                
                const statusEl = document.getElementById('ros2Status');
                if (data.is_running) {
                    statusEl.textContent = 'Running';
                    statusEl.className = 'text-2xl font-bold text-green-400';
                    document.getElementById('connectionStatus').innerHTML = `
                        <div class="w-3 h-3 rounded-full bg-green-500 pulse"></div>
                        <span class="text-lg text-green-400">Connected</span>
                    `;
                } else {
                    statusEl.textContent = 'Stopped';
                    statusEl.className = 'text-2xl font-bold text-red-400';
                    document.getElementById('connectionStatus').innerHTML = `
                        <div class="w-3 h-3 rounded-full bg-red-500"></div>
                        <span class="text-lg text-red-400">Disconnected</span>
                    `;
                }
                
                document.getElementById('messageCount').textContent = `${data.message_count} messages`;
                document.getElementById('messageCountLarge').textContent = data.message_count;
            } catch (error) {
                console.error('Status error:', error);
            }
        }

        
        async function fetchData() {
            try {
                const response = await fetch(`${SERVER_URL}/api/ros2/data`);
                const data = await response.json();
                
                if (data.message) {
                    document.getElementById('latestNode').textContent = data.node_name || '-';
                    document.getElementById('latestMessage').textContent = data.message;
                    document.getElementById('latestTime').textContent = 
                        new Date(data.timestamp).toLocaleTimeString();
                    
                    // Add to log stream
                    addLogEntry(data);
                }
            } catch (error) {
                console.error('Data fetch error:', error);
            }
        }

       
        function addLogEntry(data) {
            const logStream = document.getElementById('logStream');
            
            
            if (logStream.querySelector('.text-gray-400')) {
                logStream.innerHTML = '';
            }
            
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.innerHTML = `
                <span class="text-gray-400">[${new Date(data.timestamp).toLocaleTimeString()}]</span>
                <span class="text-blue-400">[${data.node_name}]</span>
                <span class="text-white">${data.message}</span>
            `;
            
            logStream.insertBefore(entry, logStream.firstChild);
            
            
            while (logStream.children.length > 50) {
                logStream.removeChild(logStream.lastChild);
            }
        }

        
        function clearLogs() {
            document.getElementById('logStream').innerHTML = 
                '<div class="text-gray-400 text-center py-4">Logs cleared</div>';
        }

      
        async function updateNodes() {
            try {
                const response = await fetch(`${SERVER_URL}/api/ros2/nodes`);
                const data = await response.json();
                
                const nodesList = document.getElementById('nodesList');
                document.getElementById('nodeCount').textContent = data.nodes.length;
                
                if (data.nodes.length > 0) {
                    nodesList.innerHTML = data.nodes.map(node => 
                        `<div class="bg-white/10 px-3 py-2 rounded-lg text-sm">${node}</div>`
                    ).join('');
                } else {
                    nodesList.innerHTML = '<div class="text-gray-400">No nodes detected</div>';
                }
            } catch (error) {
                console.error('Nodes error:', error);
            }
        }

       
        async function updateTopics() {
            try {
                const response = await fetch(`${SERVER_URL}/api/ros2/topics`);
                const data = await response.json();
                
                const topicsList = document.getElementById('topicsList');
                document.getElementById('topicCount').textContent = data.topics.length;
                
                if (data.topics.length > 0) {
                    topicsList.innerHTML = data.topics.map(topic => 
                        `<div class="bg-white/10 px-3 py-2 rounded-lg text-sm">${topic}</div>`
                    ).join('');
                } else {
                    topicsList.innerHTML = '<div class="text-gray-400">No topics detected</div>';
                }
            } catch (error) {
                console.error('Topics error:', error);
            }
        }

        
        async function init() {
            await refreshStatus();
            
           
            setInterval(fetchData, 500);
            
         
            setInterval(updateStatus, 3000);
            
            
            setInterval(() => {
                updateNodes();
                updateTopics();
            }, 5000);
        }

        window.addEventListener('load', init);
    </script>
</body>
</html>


<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROS2 Node Manager</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%);
            min-height: 100vh;
            color: white;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
        }
        .node-card {
            transition: all 0.3s;
            cursor: pointer;
        }
        .node-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }
        .node-card.selected {
            background: rgba(59, 130, 246, 0.3);
            border: 2px solid #3b82f6;
        }
        .node-card.running {
            background: rgba(16, 185, 129, 0.3);
            border: 2px solid #10b981;
        }
        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            color: white;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        .btn-success { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
        .btn-danger { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }
        .btn-primary { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); }
        .btn-warning { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); }
        .log-container {
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }
        .pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body class="p-6">
    <div class="max-w-7xl mx-auto">
        
        <div class="text-center mb-8">
            <h1 class="text-5xl font-bold text-white mb-4">ROS2 Node Manager</h1>
            <div class="flex items-center justify-center gap-3">
                <div id="connectionStatus" class="flex items-center gap-2">
                    <div class="w-3 h-3 rounded-full bg-gray-500"></div>
                    <span class="text-lg">Initializing...</span>
                </div>
                <span class="text-gray-400">|</span>
                <span id="runningCount" class="text-gray-400">0 nodes running</span>
            </div>
        </div>

        <div class="glass-card p-6 mb-6">
            <h2 class="text-2xl font-bold mb-4">Quick Actions</h2>
            <div class="flex flex-wrap gap-3">
                <button onclick="selectAll()" class="btn btn-primary">Select All</button>
                <button onclick="deselectAll()" class="btn btn-warning">Deselect All</button>
                <button onclick="runSelected()" class="btn btn-success">Run Selected</button>
                <button onclick="stopSelected()" class="btn btn-danger">Stop Selected</button>
                <button onclick="stopAll()" class="btn btn-danger">Stop All Nodes</button>
                <button onclick="refreshStatus()" class="btn btn-primary">Refresh</button>
            </div>
        </div>

        <div class="glass-card p-6 mb-6">
            <h2 class="text-2xl font-bold mb-4">Available Nodes (Click to Select)</h2>
            <div id="nodesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
            <div class="glass-card p-6">
                <h3 class="text-sm font-semibold text-gray-300 mb-2">Selected</h3>
                <div class="text-3xl font-bold text-blue-400" id="selectedCount">0</div>
            </div>
            <div class="glass-card p-6">
                <h3 class="text-sm font-semibold text-gray-300 mb-2">Running</h3>
                <div class="text-3xl font-bold text-green-400" id="runningCountLarge">0</div>
            </div>
            <div class="glass-card p-6">
                <h3 class="text-sm font-semibold text-gray-300 mb-2">Active Topics</h3>
                <div class="text-3xl font-bold text-purple-400" id="topicCount">0</div>
            </div>
            <div class="glass-card p-6">
                <h3 class="text-sm font-semibold text-gray-300 mb-2">Messages</h3>
                <div class="text-3xl font-bold text-yellow-400" id="messageCount">0</div>
            </div>
        </div>

        <div class="glass-card p-6 mb-6">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold">Message Stream</h2>
                <button onclick="clearLogs()" class="btn btn-danger text-sm py-1">Clear</button>
            </div>
            <div id="logStream" class="log-container bg-black/30 rounded-lg p-4">
                <div class="text-gray-400 text-center py-4">Waiting for messages...</div>
            </div>
        </div>

        <div class="glass-card p-6">
            <h2 class="text-2xl font-bold mb-4">Running Nodes Details</h2>
            <div id="runningNodesList" class="space-y-2">
                <div class="text-gray-400">No nodes running</div>
            </div>
        </div>
    </div>

    <script>
        const SERVER_URL = 'http://localhost:3000';
        
        const availableNodes = [
            { name: 'publisher_node', package: 'my_robot_controller', description: 'Publisher Node' },
            { name: 'subscriber_node', package: 'my_robot_controller', description: 'Subscriber Node' },
            { name: 'service_node', package: 'my_robot_controller', description: 'Service Node' },
            { name: 'client_node', package: 'my_robot_controller', description: 'Client Node' },
            { name: 'led_client', package: 'my_robot_controller', description: 'LED Client' },
            { name: 'led_service', package: 'my_robot_controller', description: 'LED Service' },
            { name: 'yes_no_service', package: 'my_robot_controller', description: 'Yes/No Service' },
            { name: 'yes_no_client', package: 'my_robot_controller', description: 'Yes/No Client' }
        ];

        let selectedNodes = [];
        let runningNodes = {};

        function initNodesGrid() {
            const grid = document.getElementById('nodesGrid');
            grid.innerHTML = availableNodes.map(node => `
                <div class="node-card glass-card p-4" onclick="toggleNode('${node.name}')" id="node-${node.name}">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="font-bold text-lg">${node.description}</h3>
                        <div class="status-indicator w-3 h-3 rounded-full bg-gray-500" id="status-${node.name}"></div>
                    </div>
                    <div class="text-sm text-gray-300">${node.name}</div>
                    <div class="text-xs text-gray-400 mt-1">${node.package}</div>
                    <div class="mt-3 flex gap-2">
                        <button onclick="event.stopPropagation(); runSingleNode('${node.name}')"
                                class="btn btn-success text-xs py-1 px-3">Run</button>
                        <button onclick="event.stopPropagation(); stopSingleNode('${node.name}')"
                                class="btn btn-danger text-xs py-1 px-3">Stop</button>
                    </div>
                </div>
            `).join('');
        }

        function toggleNode(nodeName) {
            const index = selectedNodes.indexOf(nodeName);
            if (index > -1) {
                selectedNodes.splice(index, 1);
            } else {
                selectedNodes.push(nodeName);
            }
            updateNodeUI();
        }

        function selectAll() {
            selectedNodes = availableNodes.map(n => n.name);
            updateNodeUI();
        }

        function deselectAll() {
            selectedNodes = [];
            updateNodeUI();
        }

        function updateNodeUI() {
            availableNodes.forEach(node => {
                const card = document.getElementById(`node-${node.name}`);
                const isSelected = selectedNodes.includes(node.name);
                const isRunning = runningNodes[node.name];
                
                card.classList.remove('selected', 'running');
                if (isRunning) {
                    card.classList.add('running');
                } else if (isSelected) {
                    card.classList.add('selected');
                }

                const statusIndicator = document.getElementById(`status-${node.name}`);
                if (isRunning) {
                    statusIndicator.className = 'status-indicator w-3 h-3 rounded-full bg-green-500 pulse';
                } else {
                    statusIndicator.className = 'status-indicator w-3 h-3 rounded-full bg-gray-500';
                }
            });

            document.getElementById('selectedCount').textContent = selectedNodes.length;
        }

        async function runSingleNode(nodeName) {
            const node = availableNodes.find(n => n.name === nodeName);
            if (!node) return;

            try {
                const response = await fetch(`${SERVER_URL}/api/ros2/run-node`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        package_name: node.package,
                        node_name: node.name
                    })
                });
                const data = await response.json();
                
                if (data.success) {
                    runningNodes[nodeName] = { pid: data.pid, package: node.package };
                    addLogEntry({
                        message: `Started ${nodeName}`,
                        node_name: nodeName,
                        timestamp: new Date().toISOString()
                    });
                }
                updateNodeUI();
                updateStats();
            } catch (error) {
                alert('Error: ' + error.message);
            }
        }

        async function stopSingleNode(nodeName) {
            delete runningNodes[nodeName];
            updateNodeUI();
            updateStats();
            addLogEntry({
                message: `Stopped ${nodeName}`,
                node_name: nodeName,
                timestamp: new Date().toISOString()
            });
        }

        async function runSelected() {
            if (selectedNodes.length === 0) {
                alert('Please select at least one node');
                return;
            }

            for (const nodeName of selectedNodes) {
                await runSingleNode(nodeName);
                await new Promise(resolve => setTimeout(resolve, 500));
            }
        }

        async function stopSelected() {
            if (selectedNodes.length === 0) {
                alert('Please select at least one node');
                return;
            }

            for (const nodeName of selectedNodes) {
                await stopSingleNode(nodeName);
            }
            deselectAll();
        }

        async function stopAll() {
            try {
                const response = await fetch(`${SERVER_URL}/api/ros2/stop`, { method: 'POST' });
                const data = await response.json();
                runningNodes = {};
                updateNodeUI();
                updateStats();
                addLogEntry({
                    message: 'All nodes stopped',
                    node_name: 'system',
                    timestamp: new Date().toISOString()
                });
            } catch (error) {
                alert('Error: ' + error.message);
            }
        }

        async function updateStats() {
            try {
                const topicsResponse = await fetch(`${SERVER_URL}/api/ros2/topics`);
                const topicsData = await topicsResponse.json();
                document.getElementById('topicCount').textContent = topicsData.topics.length;

                const runningCount = Object.keys(runningNodes).length;
                document.getElementById('runningCountLarge').textContent = runningCount;
                document.getElementById('runningCount').textContent = `${runningCount} nodes running`;

                if (runningCount > 0) {
                    document.getElementById('connectionStatus').innerHTML = `
                        <div class="w-3 h-3 rounded-full bg-green-500 pulse"></div>
                        <span class="text-lg text-green-400">Active</span>
                    `;
                } else {
                    document.getElementById('connectionStatus').innerHTML = `
                        <div class="w-3 h-3 rounded-full bg-gray-500"></div>
                        <span class="text-lg text-gray-400">Idle</span>
                    `;
                }

                const runningList = document.getElementById('runningNodesList');
                if (runningCount > 0) {
                    runningList.innerHTML = Object.entries(runningNodes).map(([name, info]) => `
                        <div class="bg-white/10 px-4 py-3 rounded-lg flex justify-between items-center">
                            <div>
                                <div class="font-semibold">${name}</div>
                                <div class="text-xs text-gray-400">PID: ${info.pid}</div>
                            </div>
                            <button onclick="stopSingleNode('${name}')" class="btn btn-danger text-xs py-1 px-3">Stop</button>
                        </div>
                    `).join('');
                } else {
                    runningList.innerHTML = '<div class="text-gray-400">No nodes running</div>';
                }
            } catch (error) {
                console.error('Stats error:', error);
            }
        }

        async function fetchData() {
            try {
                const response = await fetch(`${SERVER_URL}/api/ros2/data`);
                const data = await response.json();
                
                if (data.message) {
                    addLogEntry(data);
                    document.getElementById('messageCount').textContent = data.message_count || 0;
                }
            } catch (error) {
                console.error('Data fetch error:', error);
            }
        }

        function addLogEntry(data) {
            const logStream = document.getElementById('logStream');
            
            if (logStream.querySelector('.text-gray-400')) {
                logStream.innerHTML = '';
            }
            
            const entry = document.createElement('div');
            entry.className = 'border-b border-white/10 pb-2 mb-2';
            entry.innerHTML = `
                <span class="text-gray-400">[${new Date(data.timestamp).toLocaleTimeString()}]</span>
                <span class="text-blue-400">[${data.node_name}]</span>
                <span class="text-white">${data.message}</span>
            `;
            
            logStream.insertBefore(entry, logStream.firstChild);
            
            while (logStream.children.length > 50) {
                logStream.removeChild(logStream.lastChild);
            }
        }

        function clearLogs() {
            document.getElementById('logStream').innerHTML =
                '<div class="text-gray-400 text-center py-4">Logs cleared</div>';
        }

        async function refreshStatus() {
            await updateStats();
        }

        function init() {
            initNodesGrid();
            updateStats();
            
            setInterval(fetchData, 500);
            setInterval(updateStats, 3000);
        }

        window.addEventListener('load', init);
    </script>
</body>
</html> -->